<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>InstaPlay ğŸ®</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:"Tajawal",sans-serif;
      background:linear-gradient(-45deg,#f9ce34,#ee2a7b,#6228d7,#f9ce34);
      background-size:400% 400%;animation:gradientMove 12s ease infinite;
      color:white;min-height:100vh;display:flex;justify-content:center;align-items:flex-start;padding:20px;}
    @keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .card{background:rgba(0,0,0,0.6);padding:20px;border-radius:18px;width:460px;max-width:95%;box-shadow:0 10px 30px rgba(0,0,0,0.5);margin:10px auto;}
    h1,h2,h3{margin:0 0 15px;text-align:center;}
    input,button{width:100%;margin:6px 0;padding:12px;border:none;border-radius:10px;font-size:15px;}
    input{background:#fff;color:#333}
    button{cursor:pointer;font-weight:bold;background:white;color:#6228d7;transition:.3s}
    button:hover{background:#ee2a7b;color:white;transform:scale(1.05)}
    .hidden{display:none}
    .games-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    .game-btn{background:#fff;color:#6228d7;padding:14px;border-radius:10px;font-weight:bold;cursor:pointer}
    .game-btn:hover{background:#f9ce34;color:#000}
    table{width:100%;border-collapse:collapse;background:rgba(255,255,255,0.1);margin-top:10px;}
    th,td{padding:6px;border:1px solid rgba(255,255,255,0.2);font-size:13px;text-align:center}
    th{background:rgba(0,0,0,0.4)}
  </style>
</head>
<body>

<!-- ğŸ” ØªØ³Ø¬ÙŠÙ„ -->
<div id="auth" class="card">
  <h1>ğŸ® InstaPlay</h1>
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
  <input id="name" type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
  <input id="email" type="text" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="register()">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- ğŸ® Dashboard -->
<div id="dashboard" class="card hidden">
  <h2>Ù…Ø±Ø­Ø¨Ø§ <span id="userName"></span></h2>
  <p>ID: <span id="userId"></span></p>
  <p>ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <span id="balance"></span> $</p>
  <button onclick="activateDemo()">ğŸ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ</button>

  <div class="games-grid">
    <div class="game-btn" onclick="hideAll();show('coinGame')">ğŸª™ Coin</div>
    <div class="game-btn" onclick="hideAll();show('diceGame')">ğŸ² Dice</div>
    <div class="game-btn" onclick="hideAll();show('rpsGame')">âœŠâœ‹âœŒï¸ RPS</div>
    <div class="game-btn" onclick="hideAll();show('slotGame')">ğŸ° Slot</div>
    <div class="game-btn" onclick="startMines()">ğŸ’£ Mines</div>
  </div>

  <button onclick="showStats()">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</button>

  <h3>ğŸ“œ Ø³Ø¬Ù„ÙŠ</h3>
  <table><thead><tr><th>ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø©</th><th>ğŸ’µ Ø§Ù„Ø±Ù‡Ø§Ù†</th><th>ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø©</th><th>ğŸ•’ Ø§Ù„ÙˆÙ‚Øª</th></tr></thead><tbody id="userTx"></tbody></table>
  <button onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
</div>

<!-- ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ -->
<div id="statsCard" class="card hidden">
  <h2>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</h2>
  <table>
    <tr><th>ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù„Ø¹ÙˆØ¨Ø©</th><td id="statGames">0</td></tr>
    <tr><th>ğŸ’° Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</th><td id="statWins">0</td></tr>
    <tr><th>ğŸ’¸ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®Ø³Ø§Ø¦Ø±</th><td id="statLosses">0</td></tr>
    <tr><th>ğŸ’µ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</th><td id="statBalance">0</td></tr>
  </table>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div id="adminPanel" class="card hidden">
  <h3>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
  <table id="usersTable"><thead><tr><th>Ø§Ø³Ù…</th><th>ID</th><th>Ø±ØµÙŠØ¯</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr></thead><tbody></tbody></table>
  <h3>ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
  <table><thead><tr><th>ğŸ‘¤ Ø§Ù„Ù„Ø§Ø¹Ø¨</th><th>ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø©</th><th>ğŸ’µ</th><th>ğŸ“Š</th><th>ğŸ•’</th></tr></thead><tbody id="adminTx"></tbody></table>
</div>

<!-- ğŸª™ Coin -->
<div id="coinGame" class="card hidden">
  <h2>ğŸª™ Coin Toss</h2>
  <button onclick="flipCoin('ÙˆØ¬Ù‡')">ÙˆØ¬Ù‡</button>
  <button onclick="flipCoin('ÙƒØªØ§Ø¨Ø©')">ÙƒØªØ§Ø¨Ø©</button>
  <p id="coinResult"></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ² Dice -->
<div id="diceGame" class="card hidden">
  <h2>ğŸ² Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯</h2>
  <button onclick="rollDice()">ğŸ² Ø§Ø±Ù…ÙŠ</button>
  <p id="diceResult"></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- âœŠâœ‹âœŒï¸ RPS -->
<div id="rpsGame" class="card hidden">
  <h2>âœŠâœ‹âœŒï¸ Rock Paper Scissors</h2>
  <button onclick="playRPSreal('âœŠ')">âœŠ Ø­Ø¬Ø±Ø©</button>
  <button onclick="playRPSreal('âœ‹')">âœ‹ ÙˆØ±Ù‚Ø©</button>
  <button onclick="playRPSreal('âœŒï¸')">âœŒï¸ Ù…Ù‚Øµ</button>
  <p id="rpsResult"></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ° Slot Machine -->
<div id="slotGame" class="card hidden">
  <h2>ğŸ° Slot Machine</h2>
  <div id="slotReels" style="display:flex;justify-content:center;font-size:40px;gap:20px;margin:15px 0;">
    <span id="reel1">â“</span>
    <span id="reel2">â“</span>
    <span id="reel3">â“</span>
  </div>
  <button onclick="playSlot()">â–¶ï¸ Spin</button>
  <p id="slotResult"></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ’£ Mines -->
<div id="minesGame" class="card hidden">
  <h2>ğŸ’£ Mines</h2>
  <div id="minesGrid" style="display:grid;grid-template-columns:repeat(5,60px);gap:10px;justify-content:center;margin:15px 0;"></div>
  <p id="minesResult"></p>
  <button onclick="resetMines()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø©</button>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<script>
const ADMIN_NAME="youssef";
const ADMIN_EMAIL="yousssef@gmail.com";
const ADMIN_PASS="1234567890$";
let currentUser=null;

/* Helpers */
function uid(){return "UID"+Math.floor(Math.random()*99999);}
function saveUser(u){localStorage.setItem("user_"+u.email,JSON.stringify(u));}
function loadUser(e){return JSON.parse(localStorage.getItem("user_"+e));}
function allUsers(){let a=[];for(let i=0;i<localStorage.length;i++){let k=localStorage.key(i);if(k.startsWith("user_"))a.push(JSON.parse(localStorage.getItem(k)));}return a;}
function hideAll(){["auth","dashboard","statsCard","adminPanel","coinGame","diceGame","rpsGame","slotGame","minesGame"].forEach(id=>document.getElementById(id).classList.add("hidden"));}
function show(id){document.getElementById(id).classList.remove("hidden");}

/* ØªØ³Ø¬ÙŠÙ„ */
function register(){
  let name=document.getElementById("name").value.trim();
  let email=document.getElementById("email").value.trim();
  let pass=document.getElementById("pass").value.trim();
  if(!email||!pass||!name){alert("ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©");return;}
  if(loadUser(email)){alert("Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¬ÙˆØ¯");return;}
  let role=(email===ADMIN_EMAIL)?"admin":"user";
  let u={name,email,password:pass,balance:20,id:uid(),role,tx:[]};
  saveUser(u);alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø±ØµÙŠØ¯ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ 20$).");
}
function login(){
  let email=document.getElementById("email").value.trim();
  let pass=document.getElementById("pass").value.trim();
  if(email===ADMIN_EMAIL && pass===ADMIN_PASS){
    currentUser={name:ADMIN_NAME,email:ADMIN_EMAIL,role:"admin",balance:0,id:"ADMIN",tx:[]};
    hideAll();show("adminPanel");renderUsers();renderTx();return;
  }
  let u=loadUser(email);
  if(!u||u.password!==pass){alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");return;}
  currentUser=u;updateUI();hideAll();show("dashboard");
}
function logout(){currentUser=null;hideAll();show("auth");}
function updateUser(u){saveUser(u);if(currentUser&&currentUser.email===u.email){document.getElementById("balance").innerText=u.balance;}}

/* Dashboard */
function updateUI(){document.getElementById("userName").innerText=currentUser.name;document.getElementById("userId").innerText=currentUser.id;document.getElementById("balance").innerText=currentUser.balance;renderUserTx();saveUser(currentUser);}
function activateDemo(){if(currentUser.balance===0&&!currentUser.demoUsed){currentUser.balance=20;currentUser.demoUsed=true;alert("ğŸ Ø±ØµÙŠØ¯ ØªØ¬Ø±ÙŠØ¨ÙŠ 20$");updateUI();}else{alert("âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯ÙŠÙ…Ùˆ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");}}
function renderUserTx(){let tx=document.getElementById("userTx");tx.innerHTML="";if(currentUser.tx){currentUser.tx.forEach(t=>{let tr=document.createElement("tr");tr.innerHTML=`<td>${t.game}</td><td>${t.bet}$</td><td>${t.result}</td><td>${t.time}</td>`;tx.appendChild(tr);});}}
function logTx(game,bet,result){let time=new Date().toLocaleString();currentUser.tx.unshift({game,bet,result,time});if(currentUser.tx.length>50)currentUser.tx.pop();saveUser(currentUser);}

/* Stats */
function showStats(){hideAll();show("statsCard");let totalGames=currentUser.tx.length;let wins=currentUser.tx.filter(t=>t.result.includes("Ø±Ø¨Ø­Øª")||t.result.includes("ÙØ²Øª")||t.result.includes("Safe")||t.result.includes("Jackpot")).length;let losses=currentUser.tx.filter(t=>t.result.includes("Ø®Ø³Ø±Øª")||t.result.includes("Ø§Ù†ÙØ¬Ø§Ø±")).length;document.getElementById("statGames").innerText=totalGames;document.getElementById("statWins").innerText=wins;document.getElementById("statLosses").innerText=losses;document.getElementById("statBalance").innerText=currentUser.balance;}
function backToDash(){hideAll();show("dashboard");}

/* Admin */
function renderUsers(){let tbody=document.querySelector("#usersTable tbody");tbody.innerHTML="";allUsers().forEach(u=>{let tr=document.createElement("tr");tr.innerHTML=`<td>${u.name}</td><td>${u.id}</td><td>${u.balance}$</td><td><input type="number" value="${u.balance}" id="bal_${u.email}"><button onclick="changeBal('${u.email}')">âœ”ï¸</button></td>`;tbody.appendChild(tr);});}
function changeBal(email){let val=parseInt(document.getElementById("bal_"+email).value);let u=loadUser(email);u.balance=val;updateUser(u);renderUsers();}
function renderTx(){let tx=document.getElementById("adminTx");tx.innerHTML="";allUsers().forEach(u=>{if(u.tx){u.tx.forEach(t=>{let tr=document.createElement("tr");tr.innerHTML=`<td>${u.name}</td><td>${t.game}</td><td>${t.bet}$</td><td>${t.result}</td><td>${t.time}</td>`;tx.appendChild(tr);});}});}

/* ğŸª™ Coin */
function flipCoin(choice){
  let result=Math.random()<0.5?"ÙˆØ¬Ù‡":"ÙƒØªØ§Ø¨Ø©";
  document.getElementById("coinResult").innerText="Ø§Ù„Ù†ØªÙŠØ¬Ø©: "+result;
  if(result===choice){currentUser.balance+=5;logTx("Coin Toss",5,"Ø±Ø¨Ø­Øª ("+result+")");}
  else{currentUser.balance=Math.max(0,currentUser.balance-5);logTx("Coin Toss",5,"Ø®Ø³Ø±Øª ("+result+")");}
  updateUI();
}

/* ğŸ² Dice */
function rollDice(){
  let roll=Math.floor(Math.random()*6)+1;
  document.getElementById("diceResult").innerText="Ø·Ù„Ø¹: "+roll;
  if(roll>=4){currentUser.balance+=10;logTx("Dice",10,"Ø±Ø¨Ø­Øª ("+roll+")");}
  else{currentUser.balance=Math.max(0,currentUser.balance-5);logTx("Dice",5,"Ø®Ø³Ø±Øª ("+roll+")");}
  updateUI();
}

/* âœŠâœ‹âœŒï¸ RPS */
function playRPSreal(player){
  let choices=["âœŠ","âœ‹","âœŒï¸"];
  let cpu=choices[Math.floor(Math.random()*3)];
  let result="";
  if(player===cpu) result="ØªØ¹Ø§Ø¯Ù„";
  else if((player==="âœŠ"&&cpu==="âœŒï¸")||(player==="âœ‹"&&cpu==="âœŠ")||(player==="âœŒï¸"&&cpu==="âœ‹")){result="ÙØ²Øª";currentUser.balance+=8;}
  else{result="Ø®Ø³Ø±Øª";currentUser.balance=Math.max(0,currentUser.balance-8);}
  logTx("RPS",8,result+" Ø¶Ø¯ "+cpu);
  document.getElementById("rpsResult").innerText="Ø¥Ù†Øª: "+player+" | Ø®ØµÙ…: "+cpu+" => "+result;
  updateUI();
}

/* ğŸ° Slot */
function playSlot(){
  let symbols=["ğŸ’","ğŸ‹","â­","ğŸ””","7ï¸âƒ£"];
  let r1=symbols[Math.floor(Math.random()*symbols.length)];
  let r2=symbols[Math.floor(Math.random()*symbols.length)];
  let r3=symbols[Math.floor(Math.random()*symbols.length)];
  document.getElementById("reel1").innerText=r1;
  document.getElementById("reel2").innerText=r2;
  document.getElementById("reel3").innerText=r3;
  if(r1===r2 && r2===r3){currentUser.balance+=30;logTx("Slot Machine",30,"Jackpot");document.getElementById("slotResult").innerText="ğŸ‰ Jackpot!";}
  else if(r1===r2 || r2===r3 || r1===r3){currentUser.balance+=10;logTx("Slot Machine",10,"Ø±Ø¨Ø­Øª ØµØºÙŠØ±");document.getElementById("slotResult").innerText="âœ¨ Ø±Ø¨Ø­Øª ØµØºÙŠØ±";}
  else{currentUser.balance=Math.max(0,currentUser.balance-5);logTx("Slot Machine",5,"Ø®Ø³Ø±Øª");document.getElementById("slotResult").innerText="âŒ Ø®Ø³Ø±Øª";}
  updateUI();
}

/* ğŸ’£ Mines */
let mines=[];let minesActive=true;
function startMines(){hideAll();show("minesGame");resetMines();}
function resetMines(){
  let grid=document.getElementById("minesGrid");
  grid.innerHTML="";mines=[];minesActive=true;
  for(let i=0;i<25;i++){
    let isMine=Math.random()<0.2;
    mines.push(isMine);
    let btn=document.createElement("button");
    btn.innerText="â“";
    btn.style.width="60px";btn.style.height="60px";btn.style.fontSize="20px";
    btn.onclick=()=>clickMine(i,btn);
    grid.appendChild(btn);
  }
  document.getElementById("minesResult").innerText="";
}
function clickMine(i,btn){
  if(!minesActive) return;
  if(mines[i]){btn.innerText="ğŸ’£";btn.style.background="#e63946";document.getElementById("minesResult").innerText="ğŸ’¥ Ø§Ù†ÙØ¬Ø§Ø±! Ø®Ø³Ø±Øª 10$";currentUser.balance=Math.max(0,currentUser.balance-10);logTx("Mines",10,"Ø§Ù†ÙØ¬Ø§Ø±");minesActive=false;}
  else{btn.innerText="ğŸ’";btn.style.background="#06d6a0";currentUser.balance+=5;logTx("Mines",5,"Safe");document.getElementById("minesResult").innerText="âœ¨ Safe! Ø±Ø¨Ø­Øª 5$";}
  updateUI();
}
</script>
</body>
</html>
