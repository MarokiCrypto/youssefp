<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>InstaPlay ğŸ®</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:"Tajawal",sans-serif;
      background:linear-gradient(-45deg,#f9ce34,#ee2a7b,#6228d7,#f9ce34);
      background-size:400% 400%;animation:gradientMove 12s ease infinite;
      color:white;min-height:100vh;display:flex;justify-content:center;align-items:flex-start;padding:20px;}
    @keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .card{background:rgba(0,0,0,0.6);padding:20px;border-radius:18px;width:460px;max-width:95%;box-shadow:0 10px 30px rgba(0,0,0,0.5);margin:10px auto;}
    h1,h2,h3{margin:0 0 15px;text-align:center;}
    input,button,select{width:100%;margin:6px 0;padding:12px;border:none;border-radius:10px;font-size:15px;}
    input,select{background:#fff;color:#333}
    button{cursor:pointer;font-weight:bold;background:white;color:#6228d7;transition:.3s}
    button:hover{background:#ee2a7b;color:white;transform:scale(1.05)}
    .hidden{display:none}
    .games-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    .game-btn{background:#fff;color:#6228d7;padding:14px;border-radius:10px;font-weight:bold;cursor:pointer}
    .game-btn:hover{background:#f9ce34;color:#000}
    table{width:100%;border-collapse:collapse;background:rgba(255,255,255,0.1);margin-top:10px;}
    th,td{padding:6px;border:1px solid rgba(255,255,255,0.2);font-size:13px;text-align:center}
    th{background:rgba(0,0,0,0.4)}
    .menu{position:absolute;top:20px;right:20px;cursor:pointer;font-size:24px;}
    .menu-list{position:absolute;top:50px;right:20px;background:#222;padding:10px;border-radius:10px;display:none}
    .menu-list button{width:100%;margin:5px 0;}
  </style>
</head>
<body>

<!-- ğŸ” ØªØ³Ø¬ÙŠÙ„ -->
<div id="auth" class="card">
  <h1>ğŸ® InstaPlay</h1>
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
  <input id="name" type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
  <input id="email" type="text" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="register()">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <button onclick="show('adminLogin')">ğŸ‘‘ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
</div>

<!-- ğŸ‘‘ Login Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div id="adminLogin" class="card hidden">
  <h2>ğŸ‘‘ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
  <input id="adminEmail" type="text" placeholder="Gmail">
  <input id="adminPass" type="password" placeholder="Mdp">
  <button onclick="adminLogin()">Ø¯Ø®ÙˆÙ„</button>
  <button onclick="backToAuth()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ® Dashboard -->
<div id="dashboard" class="card hidden">
  <div class="menu" onclick="toggleMenu()">â‹®</div>
  <div class="menu-list" id="menuList">
    <button onclick="show('depositCard')">ğŸ’° Ø´Ø­Ù† Ø§Ù„Ø­Ø³Ø§Ø¨</button>
    <button onclick="show('withdrawCard')">ğŸ’¸ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</button>
    <button onclick="showStats()">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</button>
    <a href="https://wa.me/212713041921" target="_blank"><button>ğŸ“ Ø¯Ø¹Ù… ÙˆØ§ØªØ³Ø§Ø¨</button></a>
    <button onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
  </div>
  <h2>Ù…Ø±Ø­Ø¨Ø§ <span id="userName"></span></h2>
  <p>ID: <span id="userId"></span></p>
  <p>ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <span id="balance"></span> $</p>
  <select id="betAmount">
    <option value="5">5$</option>
    <option value="10">10$</option>
    <option value="20">20$</option>
    <option value="50">50$</option>
  </select>
  <div class="games-grid">
    <div class="game-btn" onclick="hideAll();show('coinGame')">ğŸª™ Coin</div>
    <div class="game-btn" onclick="hideAll();show('diceGame')">ğŸ² Dice</div>
    <div class="game-btn" onclick="hideAll();show('rpsGame')">âœŠâœ‹âœŒï¸ RPS</div>
    <div class="game-btn" onclick="hideAll();show('slotGame')">ğŸ° Slot</div>
    <div class="game-btn" onclick="startMines()">ğŸ’£ Mines</div>
  </div>
</div>

<!-- ğŸ’° Ø¥ÙŠØ¯Ø§Ø¹ -->
<div id="depositCard" class="card hidden">
  <h2>ğŸ’° Ø´Ø­Ù† Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
  <select><option>Al Barid Bank</option><option>Cash Plus</option><option>CIH Bank</option><option>Attijariwafa</option><option>BMCE</option><option>BCP</option></select>
  <p>ğŸ“ ÙˆØ§ØªØ³Ø§Ø¨: <b>+212 713-041921</b></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ’¸ Ø³Ø­Ø¨ -->
<div id="withdrawCard" class="card hidden">
  <h2>ğŸ’¸ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h2>
  <select><option>Al Barid Bank</option><option>Cash Plus</option><option>CIH Bank</option><option>Attijariwafa</option><option>BMCE</option><option>BCP</option></select>
  <p>ğŸ“ ÙˆØ§ØªØ³Ø§Ø¨: <b>+212 713-041921</b></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ -->
<div id="statsCard" class="card hidden">
  <h2>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</h2>
  <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨: <span id="statGames">0</span></p>
  <p>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: <span id="statWins">0</span></p>
  <p>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®Ø³Ø§Ø¦Ø±: <span id="statLosses">0</span></p>
  <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="statBalance">0</span></p>
  <button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div id="adminPanel" class="card hidden">
  <h3>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
  <table id="usersTable"><thead><tr><th>Ø§Ø³Ù…</th><th>ID</th><th>Ø±ØµÙŠØ¯</th><th>ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø±ØµÙŠØ¯</th><th>âš¡ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙÙˆØ²</th></tr></thead><tbody></tbody></table>
</div>

<!-- Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ (Coin / Dice / RPS / Slot / Mines) -->
<div id="coinGame" class="card hidden"><h2>ğŸª™ Coin Toss</h2><button onclick="flipCoin('ÙˆØ¬Ù‡')">ÙˆØ¬Ù‡</button><button onclick="flipCoin('ÙƒØªØ§Ø¨Ø©')">ÙƒØªØ§Ø¨Ø©</button><p id="coinResult"></p><button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button></div>
<div id="diceGame" class="card hidden"><h2>ğŸ² Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯</h2><button onclick="rollDice()">ğŸ² Ø§Ø±Ù…ÙŠ</button><p id="diceResult"></p><button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button></div>
<div id="rpsGame" class="card hidden"><h2>âœŠâœ‹âœŒï¸ RPS</h2><button onclick="playRPSreal('âœŠ')">âœŠ</button><button onclick="playRPSreal('âœ‹')">âœ‹</button><button onclick="playRPSreal('âœŒï¸')">âœŒï¸</button><p id="rpsResult"></p><button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button></div>
<div id="slotGame" class="card hidden"><h2>ğŸ° Slot</h2><div id="slotReels" style="display:flex;justify-content:center;font-size:40px;gap:20px;margin:15px 0;"><span id="reel1">â“</span><span id="reel2">â“</span><span id="reel3">â“</span></div><button onclick="playSlot()">â–¶ï¸ Spin</button><p id="slotResult"></p><button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button></div>
<div id="minesGame" class="card hidden"><h2>ğŸ’£ Mines</h2><div id="minesGrid" style="display:grid;grid-template-columns:repeat(5,60px);gap:10px;justify-content:center;margin:15px 0;"></div><p id="minesResult"></p><button onclick="resetMines()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø©</button><button onclick="backToDash()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button></div>

<script>
const ADMIN_EMAIL="admin@gmail.com";
const ADMIN_PASS="admin123";
let currentUser=null;

function uid(){return "UID"+Math.floor(Math.random()*99999);}
function saveUser(u){localStorage.setItem("user_"+u.email,JSON.stringify(u));}
function loadUser(e){return JSON.parse(localStorage.getItem("user_"+e));}
function allUsers(){let a=[];for(let i=0;i<localStorage.length;i++){let k=localStorage.key(i);if(k.startsWith("user_"))a.push(JSON.parse(localStorage.getItem(k)));}return a;}
function hideAll(){document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));}
function show(id){hideAll();document.getElementById(id).classList.remove("hidden");}
function backToDash(){hideAll();show("dashboard");}
function backToAuth(){hideAll();show("auth");}
function toggleMenu(){let m=document.getElementById("menuList");m.style.display=(m.style.display=="block")?"none":"block";}

function register(){
  let name=document.getElementById("name").value;
  let email=document.getElementById("email").value;
  let pass=document.getElementById("pass").value;
  if(!name||!email||!pass){alert("Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");return;}
  if(loadUser(email)){alert("Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¬ÙˆØ¯");return;}
  let u={name,email,password:pass,balance:20,id:uid(),tx:[],mode:"normal"};
  saveUser(u);alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø±ØµÙŠØ¯ 20$).");
}
function login(){
  let email=document.getElementById("email").value;
  let pass=document.getElementById("pass").value;
  let u=loadUser(email);
  if(!u||u.password!==pass){alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");return;}
  currentUser=u;updateUI();show("dashboard");
}
function logout(){currentUser=null;backToAuth();}
function adminLogin(){
  let email=document.getElementById("adminEmail").value;
  let pass=document.getElementById("adminPass").value;
  if(email===ADMIN_EMAIL && pass===ADMIN_PASS){show("adminPanel");renderUsers();}
  else alert("Ø®Ø·Ø£ ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†");
}

function updateUI(){
  document.getElementById("userName").innerText=currentUser.name;
  document.getElementById("userId").innerText=currentUser.id;
  document.getElementById("balance").innerText=currentUser.balance;
  saveUser(currentUser);
}
function getBet(){let v=parseInt(document.getElementById("betAmount").value);if(currentUser.balance<v){alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§Ù");return null;}if(v<5){alert("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 5$");return null;}return v;}

/* ğŸ“Š Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… */
function forceResult(){return currentUser.mode||"normal";}

/* Ø£Ù„Ø¹Ø§Ø¨ */
function flipCoin(choice){let bet=getBet();if(!bet)return;let mode=forceResult();let result=(mode==="win")?choice:(mode==="lose")?(choice==="ÙˆØ¬Ù‡"?"ÙƒØªØ§Ø¨Ø©":"ÙˆØ¬Ù‡"):(Math.random()<0.5?"ÙˆØ¬Ù‡":"ÙƒØªØ§Ø¨Ø©");if(result===choice){currentUser.balance+=bet;alert("Ø±Ø¨Ø­Øª!")}else{currentUser.balance-=bet;alert("Ø®Ø³Ø±Øª!")}updateUI();}
function rollDice(){let bet=getBet();if(!bet)return;let mode=forceResult();let r=(mode==="win")?6:(mode==="lose")?1:(Math.floor(Math.random()*6)+1);if(r>=4){currentUser.balance+=bet;alert("Ø±Ø¨Ø­Øª "+r);}else{currentUser.balance-=bet;alert("Ø®Ø³Ø±Øª "+r);}updateUI();}
function playRPSreal(p){let bet=getBet();if(!bet)return;let mode=forceResult();let c=(mode==="win")?(p==="âœŠ"?"âœŒï¸":p==="âœ‹"?"âœŠ":"âœ‹"):(mode==="lose")?(p==="âœŠ"?"âœ‹":p==="âœ‹"?"âœŒï¸":"âœŠ"):["âœŠ","âœ‹","âœŒï¸"][Math.floor(Math.random()*3)];let res=(p===c)?"ØªØ¹Ø§Ø¯Ù„":((p==="âœŠ"&&c==="âœŒï¸")||(p==="âœ‹"&&c==="âœŠ")||(p==="âœŒï¸"&&c==="âœ‹"))?"ÙØ²Øª":"Ø®Ø³Ø±Øª";if(res==="ÙØ²Øª")currentUser.balance+=bet;else if(res==="Ø®Ø³Ø±Øª")currentUser.balance-=bet;alert("Ø¥Ù†Øª:"+p+" Ø®ØµÙ…:"+c+" => "+res);updateUI();}
function playSlot(){let bet=getBet();if(!bet)return;let mode=forceResult();let s=["ğŸ’","ğŸ‹","â­","ğŸ””","7ï¸âƒ£"];let r1,r2,r3;if(mode==="win"){r1=r2=r3="7ï¸âƒ£";}else if(mode==="lose"){r1="ğŸ’";r2="â­";r3="ğŸ””";}else{r1=s[Math.floor(Math.random()*s.length)];r2=s[Math.floor(Math.random()*s.length)];r3=s[Math.floor(Math.random()*s.length)];}if(r1===r2&&r2===r3){currentUser.balance+=bet*5;alert("Jackpot!")}else if(r1===r2||r2===r3||r1===r3){currentUser.balance+=bet;alert("Ø±Ø¨Ø­Øª ØµØºÙŠØ±")}else{currentUser.balance-=bet;alert("Ø®Ø³Ø±Øª")}updateUI();}
let mines=[];let active=true;
function startMines(){hideAll();show("minesGame");resetMines();}
function resetMines(){let g=document.getElementById("minesGrid");g.innerHTML="";mines=[];active=true;for(let i=0;i<25;i++){let m=Math.random()<0.2;mines.push(m);let b=document.createElement("button");b.innerText="â“";b.style.width="60px";b.style.height="60px";b.onclick=()=>clickMine(i,b);g.appendChild(b);}}
function clickMine(i,b){if(!active)return;let bet=getBet();if(!bet)return;let mode=forceResult();if((mode==="lose")||mines[i]){b.innerText="ğŸ’£";currentUser.balance-=bet;alert("Ø§Ù†ÙØ¬Ø§Ø±! Ø®Ø³Ø±Øª");active=false;}else{b.innerText="ğŸ’";currentUser.balance+=bet;alert("Safe! Ø±Ø¨Ø­Øª");}updateUI();}

/* Admin */
function renderUsers(){let tbody=document.querySelector("#usersTable tbody");tbody.innerHTML="";allUsers().forEach(u=>{let tr=document.createElement("tr");tr.innerHTML=`<td>${u.name}</td><td>${u.id}</td><td>${u.balance}</td><td><input type='number' value='${u.balance}' id='bal_${u.email}'><button onclick="updateBal('${u.email}')">âœ”ï¸</button></td><td><select id="mode_${u.email}" onchange="changeMode('${u.email}')"><option value="normal" ${u.mode==="normal"?"selected":""}>âš–ï¸ Ø¹Ø§Ø¯ÙŠ</option><option value="win" ${u.mode==="win"?"selected":""}>ğŸ”¥ ÙŠØ±Ø¨Ø­ Ø¯ÙŠÙ…Ø§</option><option value="lose" ${u.mode==="lose"?"selected":""}>âŒ ÙŠØ®Ø³Ø± Ø¯ÙŠÙ…Ø§</option></select></td>`;tbody.appendChild(tr);});}
function updateBal(email){let u=loadUser(email);u.balance=parseInt(document.getElementById("bal_"+email).value);saveUser(u);renderUsers();}
function changeMode(email){let u=loadUser(email);u.mode=document.getElementById("mode_"+email).value;saveUser(u);renderUsers();}
</script>
</body>
</html>
