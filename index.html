<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>InstaPlay + InstaFly</title>
  <style>
    body {
      margin:0;font-family:"Tajawal",sans-serif;
      background:linear-gradient(-45deg,#f9ce34,#ee2a7b,#6228d7,#f9ce34);
      background-size:400% 400%;animation:gradientMove 12s ease infinite;
      color:white;min-height:100vh;display:flex;justify-content:center;align-items:center;
    }
    @keyframes gradientMove {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
    .card {background:rgba(0,0,0,0.6);padding:25px;border-radius:18px;width:460px;max-width:95%;
      box-shadow:0 10px 30px rgba(0,0,0,0.5);}
    h1,h2,h3{margin:0 0 15px;}
    input,button {width:100%;margin:6px 0;padding:12px;border:none;border-radius:10px;font-size:15px;}
    input{background:rgba(255,255,255,0.9);color:#333;}
    button{cursor:pointer;font-weight:bold;background:white;color:#6228d7;transition:.3s;}
    button:hover{background:#ee2a7b;color:white;}
    #game{display:none;}
    #plane{font-size:80px;margin:20px 0;transition:transform .2s linear;}
    #multiplier{font-size:50px;font-weight:bold;text-shadow:0 0 15px #fff,0 0 25px lime;}
    .balance-box{background:rgba(255,255,255,0.1);padding:10px;border-radius:10px;margin-bottom:15px;}
    .nav{display:flex;justify-content:space-between;margin-bottom:20px;}
    .nav button{flex:1;margin:0 3px;}
    .games-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    .game-btn{background:#fff;color:#6228d7;padding:14px;border-radius:10px;font-weight:bold;cursor:pointer}
    .game-btn:hover{background:#f9ce34;color:#000}
    table{width:100%;border-collapse:collapse;background:rgba(255,255,255,0.1);margin-top:10px;}
    th,td{padding:6px;border:1px solid rgba(255,255,255,0.2);font-size:13px;}
    th{background:rgba(0,0,0,0.4);}
    .live-bets,.leaderboard{margin-top:15px;background:rgba(0,0,0,0.4);padding:10px;border-radius:10px;max-height:150px;overflow-y:auto;}
  </style>
</head>
<body>

<!-- ğŸ” ØªØ³Ø¬ÙŠÙ„ -->
<div id="auth" class="card">
  <h1>ğŸ® InstaPlay + âœˆï¸ InstaFly</h1>
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
  <input id="name" type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
  <input id="email" type="text" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="register()">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div id="game" class="card">
  <div class="nav">
    <button onclick="showGame()">ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
    <button onclick="showAdmin()">ğŸ‘‘ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
    <button onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
  </div>

  <h2>Ù…Ø±Ø­Ø¨Ø§ <span id="userName"></span></h2>
  <p>ID: <span id="userId"></span></p>
  <div class="balance-box">ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <span id="balance"></span> $</div>

  <!-- ğŸ”¹ Ø£Ù„Ø¹Ø§Ø¨ InstaPlay -->
  <div id="playGames" class="games-grid">
    <div class="game-btn" onclick="playCoin()">ğŸª™ Coin</div>
    <div class="game-btn" onclick="playDice()">ğŸ² Dice</div>
    <div class="game-btn" onclick="playWheel()">ğŸ¡ Wheel</div>
    <div class="game-btn" onclick="playMines()">ğŸ’£ Mines</div>
    <div class="game-btn" onclick="playRPS()">âœŠâœ‹âœŒï¸ RPS</div>
    <div class="game-btn" onclick="playSlot()">ğŸ° Slot</div>
    <div class="game-btn" onclick="showCrash()">âœˆï¸ Crash</div>
  </div>

  <!-- ğŸ”¹ Ù„Ø¹Ø¨Ø© Crash -->
  <div id="crashArea" style="display:none;">
    <input id="bet" type="number" min="1" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº">
    <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ù‡Ø§Ù†</button>
    <button onclick="cashOut()">Ø³Ø­Ø¨</button>
    <div id="plane">ğŸ›©ï¸</div>
    <div id="multiplier">x1.00</div>
    <button onclick="backToGames()">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
  </div>

  <div class="live-bets"><h4>ğŸ’¬ Ø±Ù‡Ø§Ù†Ø§Øª</h4><div id="betsLog"></div></div>
  <div class="leaderboard"><h4>ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</h4><div id="topPlayers"></div></div>
</div>

<!-- ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div id="adminPanel" class="card" style="display:none;">
  <h3>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
  <table id="usersTable"><thead><tr><th>Ø§Ø³Ù…</th><th>ID</th><th>Ø±ØµÙŠØ¯</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr></thead><tbody></tbody></table>
</div>

<script>
let currentUser=null,balance=0,bet=0,multiplier=1,crashed=false,timer,crashPoint;

/* âœ… Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
const ADMIN_NAME="youssef";
const ADMIN_EMAIL="yousssef@gmail.com";
const ADMIN_PASS="1234567890$";

function uid(){return "UID"+Math.floor(Math.random()*99999);}
function saveUser(u){localStorage.setItem("user_"+u.email,JSON.stringify(u));}
function loadUser(e){return JSON.parse(localStorage.getItem("user_"+e));}
function allUsers(){let a=[];for(let i=0;i<localStorage.length;i++){let k=localStorage.key(i);if(k.startsWith("user_"))a.push(JSON.parse(localStorage.getItem(k)));}return a;}

/* ØªØ³Ø¬ÙŠÙ„ */
function register(){
  let name=document.getElementById("name").value.trim();
  let email=document.getElementById("email").value.trim();
  let pass=document.getElementById("pass").value.trim();
  if(!email||!pass||!name){alert("ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©");return;}
  if(loadUser(email)){alert("Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¬ÙˆØ¯");return;}
  let role=(email===ADMIN_EMAIL)?"admin":"user";
  let u={name,email,password:pass,balance:20,id:uid(),role,profit:0};
  saveUser(u);alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø±ØµÙŠØ¯ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ 20$).");
}

function login(){
  let email=document.getElementById("email").value.trim();
  let pass=document.getElementById("pass").value.trim();

  if(email===ADMIN_EMAIL && pass===ADMIN_PASS){
    currentUser={name:ADMIN_NAME,email:ADMIN_EMAIL,role:"admin",balance:0,id:"ADMIN"};
    document.getElementById("auth").style.display="none";
    document.getElementById("game").style.display="block";
    showAdmin();
    return;
  }

  let u=loadUser(email);
  if(!u||u.password!==pass){alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");return;}
  currentUser=u;balance=u.balance;
  document.getElementById("userName").innerText=u.name;
  document.getElementById("userId").innerText=u.id;
  document.getElementById("balance").innerText=balance;
  document.getElementById("auth").style.display="none";
  document.getElementById("game").style.display="block";
  renderLeaderboard();
}
function logout(){currentUser=null;document.getElementById("auth").style.display="block";document.getElementById("game").style.display="none";}
function updateUser(u){saveUser(u);if(currentUser&&currentUser.email===u.email){balance=u.balance;document.getElementById("balance").innerText=balance;}}

/* ğŸ”¹ Ø£Ù„Ø¹Ø§Ø¨ ØµØºÙŠØ±Ø© */
function playCoin(){playSimple("Coin",5);}
function playDice(){playSimple("Dice",5);}
function playWheel(){playSimple("Wheel",10);}
function playMines(){playSimple("Mines",8);}
function playRPS(){playSimple("RPS",6);}
function playSlot(){playSimple("Slot",15);}
function playSimple(name,cost){
  if(balance<cost){alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ");return;}
  if(Math.random()<0.5){balance+=cost;alert("âœ… Ø±Ø¨Ø­Øª ÙÙŠ "+name);}else{balance-=cost;alert("âŒ Ø®Ø³Ø±Øª ÙÙŠ "+name);}
  currentUser.balance=balance;updateUser(currentUser);
}

/* ğŸ”¹ Crash Game */
function showCrash(){document.getElementById("playGames").style.display="none";document.getElementById("crashArea").style.display="block";}
function backToGames(){document.getElementById("playGames").style.display="grid";document.getElementById("crashArea").style.display="none";}

function startGame(){
  bet=parseInt(document.getElementById("bet").value);
  if(isNaN(bet)||bet<=0||bet>balance){alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ");return;}
  balance-=bet;updateUser(currentUser);
  multiplier=1;crashed=false;crashPoint=(Math.random()*30).toFixed(2);
  clearInterval(timer);
  timer=setInterval(()=>{
    if(multiplier>=crashPoint){crashed=true;clearInterval(timer);alert("ğŸ’¥ ÙƒØ±Ø§Ø´ Ø¹Ù†Ø¯ x"+multiplier.toFixed(2));bet=0;updateUser(currentUser);}
    else{multiplier+=0.05;document.getElementById("multiplier").innerText="x"+multiplier.toFixed(2);
      document.getElementById("plane").style.transform=`translateX(${multiplier*10}px) translateY(-${multiplier*3}px)`;}
  },150);
}
function cashOut(){
  if(!crashed&&bet>0){
    let profit=(bet*multiplier).toFixed(2);
    balance+=parseFloat(profit);currentUser.balance=balance;
    alert("âœ… Ø±Ø¨Ø­Øª "+profit+"$ Ø¹Ù†Ø¯ x"+multiplier.toFixed(2));
    clearInterval(timer);bet=0;updateUser(currentUser);
  }
}

/* Leaderboard */
function renderLeaderboard(){
  let all=allUsers().filter(u=>u.role!=="admin");all.sort((a,b)=>b.balance-a.balance);
  let d=document.getElementById("topPlayers");d.innerHTML="";
  all.slice(0,5).forEach((u,i)=>{let p=document.createElement("p");p.innerText=`${i+1}. ${u.name} (${u.id}) | ${u.balance}$`;d.appendChild(p);});
}

/* Admin */
function showAdmin(){
  if(!currentUser||currentUser.role!=="admin"){alert("Ù…Ùˆ Ù…Ø³Ù…ÙˆØ­");return;}
  document.getElementById("game").style.display="none";document.getElementById("adminPanel").style.display="block";renderUsers();
}
function showGame(){document.getElementById("game").style.display="block";document.getElementById("adminPanel").style.display="none";}
function renderUsers(){
  let tbody=document.querySelector("#usersTable tbody");tbody.innerHTML="";
  allUsers().forEach(u=>{
    let tr=document.createElement("tr");
    tr.innerHTML=`<td>${u.name}</td><td>${u.id}</td><td>${u.balance}</td>
      <td><input type="number" value="${u.balance}" id="bal_${u.email}">
      <button onclick="changeBal('${u.email}')">âœ”ï¸</button></td>`;
    tbody.appendChild(tr);
  });
}
function changeBal(email){
  let val=parseInt(document.getElementById("bal_"+email).value);let u=loadUser(email);u.balance=val;updateUser(u);renderUsers();
}
</script>
</body>
</html>
