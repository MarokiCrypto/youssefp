<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>InstaPlay 🎮</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin:0;font-family:"Tajawal",sans-serif;
      background:linear-gradient(-45deg,#f9ce34,#ee2a7b,#6228d7,#f9ce34);
      background-size:400% 400%;animation:gradientMove 12s ease infinite;
      color:white;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;
    }
    @keyframes gradientMove {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .card {
      background:rgba(0,0,0,0.55);backdrop-filter:blur(12px);
      padding:20px;border-radius:18px;width:100%;max-width:420px;
      box-shadow:0 12px 35px rgba(0,0,0,0.6);
      margin:10px auto;animation:fadeIn .6s ease;text-align:center;
    }
    h1,h2,h3{margin:0 0 15px;text-align:center;}
    input,button,select {
      width:100%;margin:6px 0;padding:12px;border:none;border-radius:10px;font-size:15px;
    }
    button {
      cursor:pointer;font-weight:bold;
      background:linear-gradient(45deg,#ff416c,#ff4b2b);
      color:white;transition:.3s;box-shadow:0 4px 12px rgba(0,0,0,0.3);
    }
    button:hover {transform:scale(1.07) translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,0.5);}
    .hidden{display:none}
    .games-grid {display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    .game-btn {
      background:linear-gradient(45deg,#36d1dc,#5b86e5);color:#fff;
      padding:14px;border-radius:12px;font-weight:bold;cursor:pointer;
      transition:.3s;box-shadow:0 4px 12px rgba(0,0,0,0.3);text-align:center;
    }
    .game-btn:hover {transform:scale(1.08);box-shadow:0 0 15px rgba(255,255,255,0.6);}
    @keyframes fadeIn {from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    #confettiCanvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;}

    /* === Animations === */
    @keyframes spinCoin {0%{transform:rotateY(0);}100%{transform:rotateY(720deg);}}
    @keyframes rollDice {0%{transform:rotate(0);}100%{transform:rotate(720deg);}}
    @keyframes slotSpin {0%{transform:translateY(-100%);}100%{transform:translateY(0);}}
    @keyframes wheelSpin {0%{transform:rotate(0);}100%{transform:rotate(1440deg);}}
    @keyframes plinkoDrop {0%{transform:translateY(-50px);}100%{transform:translateY(0);}}
    @keyframes towerRise {0%{transform:translateY(50px);opacity:0;}100%{transform:translateY(0);opacity:1;}}
  </style>
</head>
<body>
<canvas id="confettiCanvas" class="hidden"></canvas>

<!-- 🔐 Auth -->
<div id="auth" class="card">
  <h1>🎮 InstaPlay</h1>
  <input id="name" type="text" placeholder="Full name">
  <input id="email" type="text" placeholder="Email">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="register()">Register</button>
  <button onclick="login()">Login</button>
  <button onclick="show('adminLogin')">👑 Admin Login</button>
</div>

<!-- 👑 Admin Login -->
<div id="adminLogin" class="card hidden">
  <h2>👑 Admin Login</h2>
  <input id="adminEmail" type="text" placeholder="Email">
  <input id="adminPass" type="password" placeholder="Password">
  <button onclick="adminLogin()">Login</button>
  <button onclick="backToAuth()">⬅️ Back</button>
</div>

<!-- 👑 Admin Panel -->
<div id="adminPanel" class="card hidden">
  <h2>👑 Admin Panel</h2>
  <table id="usersTable">
    <thead><tr><th>Name</th><th>ID</th><th>Balance</th><th>Edit</th><th>Mode</th></tr></thead>
    <tbody></tbody>
  </table>
  <button onclick="backToAuth()">⬅️ Logout</button>
</div>

<!-- 🎮 Dashboard -->
<div id="dashboard" class="card hidden">
  <h2>Welcome <span id="userName"></span></h2>
  <p>💰 Balance: <span id="balance"></span> $</p>
  <select id="betAmount"><option value="5">5$</option><option value="10">10$</option><option value="20">20$</option><option value="50">50$</option></select>
  <div class="games-grid">
    <div class="game-btn" onclick="show('coinGame')">🪙 Coin</div>
    <div class="game-btn" onclick="show('diceGame')">🎲 Dice</div>
    <div class="game-btn" onclick="show('rpsGame')">✊✋✌️ RPS</div>
    <div class="game-btn" onclick="show('slotGame')">🎰 Slot</div>
    <div class="game-btn" onclick="show('minesGame')">💣 Mines</div>
    <div class="game-btn" onclick="show('crashGame')">💥 Crash</div>
    <div class="game-btn" onclick="show('wheelGame')">🎡 Wheel</div>
    <div class="game-btn" onclick="show('plinkoGame')">🟢 Plinko</div>
    <div class="game-btn" onclick="show('towerGame')">🏰 Tower</div>
  </div>
  <button onclick="logout()">🚪 Logout</button>
</div>

<!-- 🎮 Games Sections -->
<div id="coinGame" class="card hidden"><h2>🪙 Coin Toss</h2><button onclick="flipCoin('Heads')">Heads</button><button onclick="flipCoin('Tails')">Tails</button><p id="coinResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="diceGame" class="card hidden"><h2>🎲 Dice</h2><button onclick="rollDice()">🎲 Roll</button><p id="diceResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="rpsGame" class="card hidden"><h2>✊✋✌️ RPS</h2><button onclick="playRPS('✊')">✊</button><button onclick="playRPS('✋')">✋</button><button onclick="playRPS('✌️')">✌️</button><p id="rpsResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="slotGame" class="card hidden"><h2>🎰 Slot</h2><button onclick="playSlot()">▶️ Spin</button><p id="slotResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="minesGame" class="card hidden"><h2>💣 Mines</h2><button onclick="startMines()">▶️ Start</button><div id="minesGrid"></div><p id="minesResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="crashGame" class="card hidden"><h2>💥 Crash</h2><button onclick="startCrash()">▶️ Start</button><button onclick="cashoutCrash()">💵 Cashout</button><p id="crashResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="wheelGame" class="card hidden"><h2>🎡 Wheel</h2><button onclick="spinWheel()">▶️ Spin</button><p id="wheelResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="plinkoGame" class="card hidden"><h2>🟢 Plinko</h2><button onclick="playPlinko()">▶️ Drop</button><p id="plinkoResult"></p><button onclick="back()">⬅️ Back</button></div>
<div id="towerGame" class="card hidden"><h2>🏰 Tower</h2><button onclick="startTower()">▶️ Start</button><button onclick="nextTower()">⬆️ Next</button><button onclick="cashoutTower()">💵 Cashout</button><p id="towerResult"></p><button onclick="back()">⬅️ Back</button></div>

<script>
/* === ADMIN & AUTH === */
const ADMIN_EMAIL="special@gmail.com",ADMIN_PASS="special123"; let currentUser=null;
function uid(){return "UID"+Math.floor(Math.random()*99999);}
function saveUser(u){localStorage.setItem("user_"+u.email,JSON.stringify(u));renderUsers();}
function loadUser(e){return JSON.parse(localStorage.getItem("user_"+e));}
function allUsers(){let arr=[];for(let i=0;i<localStorage.length;i++){let k=localStorage.key(i);if(k.startsWith("user_"))arr.push(JSON.parse(localStorage.getItem(k)));}return arr;}
function show(id){document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));document.getElementById(id).classList.remove("hidden");}
function backToAuth(){show("auth");}function back(){show("dashboard");}
function register(){let n=document.getElementById("name").value,e=document.getElementById("email").value,p=document.getElementById("pass").value;if(!n||!e||!p){alert("Fill all fields");return;}if(loadUser(e)){alert("Account exists");return;}let u={name:n,email:e,password:p,balance:0,id:uid(),mode:"normal"};saveUser(u);alert("Registered! Ask admin for bonus.");}
function login(){let e=document.getElementById("email").value,p=document.getElementById("pass").value;let u=loadUser(e);if(!u||u.password!==p){alert("Invalid");return;}currentUser=u;updateUI();show("dashboard");}
function logout(){currentUser=null;backToAuth();}
function adminLogin(){let e=document.getElementById("adminEmail").value,p=document.getElementById("adminPass").value;if(e===ADMIN_EMAIL&&p===ADMIN_PASS){show("adminPanel");renderUsers();}else alert("Wrong admin login");}
function renderUsers(){let t=document.querySelector("#usersTable tbody");t.innerHTML="";allUsers().forEach(u=>{let s=btoa(u.email);let tr=document.createElement("tr");tr.innerHTML=`<td>${u.name}</td><td>${u.id}</td><td>${u.balance}</td><td><input type='number' value='${u.balance}' id='bal_${s}'><button onclick="updateBal('${u.email}')">✔️</button></td><td><select id="mode_${s}" onchange="changeMode('${u.email}')"><option value="normal" ${u.mode==="normal"?"selected":""}>⚖️ Normal</option><option value="win" ${u.mode==="win"?"selected":""}>🔥 Win</option><option value="lose" ${u.mode==="lose"?"selected":""}>❌ Lose</option></select></td>`;t.appendChild(tr);});}
function updateBal(e){let s=btoa(e);let u=loadUser(e);u.balance=parseInt(document.getElementById("bal_"+s).value);saveUser(u);}
function changeMode(e){let s=btoa(e);let u=loadUser(e);u.mode=document.getElementById("mode_"+s).value;saveUser(u);}
function updateUI(){document.getElementById("userName").innerText=currentUser.name;document.getElementById("balance").innerText=currentUser.balance;}
function getBet(){let v=parseInt(document.getElementById("betAmount").value);if(currentUser.balance<v){alert("Not enough balance");return null;}return v;}
function forceResult(){return currentUser.mode||"normal";}

/* === GAMES WITH ANIMATIONS === */
// Coin
function flipCoin(c){let b=getBet();if(!b)return;let res=document.getElementById("coinResult");res.innerText="🌀 Spinning...";res.style.animation="spinCoin 1s linear";setTimeout(()=>{res.style.animation="";let m=forceResult(),r;if(m==="win"){r=c;}else if(m==="lose"){r=(c==="Heads"?"Tails":"Heads");}else{r=Math.random()<0.5?"Heads":"Tails";}if(r===c){currentUser.balance+=b;res.innerText="🎉 "+r+" +"+b;}else{currentUser.balance-=b;res.innerText="❌ "+r+" -"+b;}updateUI();saveUser(currentUser);},1000);}
// Dice
function rollDice(){let b=getBet();if(!b)return;let res=document.getElementById("diceResult");res.innerText="🎲 Rolling...";res.style.animation="rollDice 1s linear";setTimeout(()=>{res.style.animation="";let m=forceResult(),r;if(m==="win"){r=6;}else if(m==="lose"){r=1;}else{r=Math.floor(Math.random()*6)+1;}if(r>=4){currentUser.balance+=b;res.innerText="⚅ 🎉 Win +"+b;}else{currentUser.balance-=b;res.innerText="⚀ ❌ Lose -"+b;}updateUI();saveUser(currentUser);},1000);}
// RPS
function playRPS(p){let b=getBet();if(!b)return;let m=forceResult(),o=["✊","✋","✌️"],c;if(m==="win"){c=(p==="✊"?"✌️":p==="✋"?"✊":"✋");}else if(m==="lose"){c=(p==="✊"?"✋":p==="✋"?"✌️":"✊");}else{c=o[Math.floor(Math.random()*3)];}let res="";if(p===c){res="🤝 Draw";}else if((p==="✊"&&c==="✌️")||(p==="✋"&&c==="✊")||(p==="✌️"&&c==="✋")){currentUser.balance+=b;res="🎉 Win +"+b;}else{currentUser.balance-=b;res="❌ Lose -"+b;}document.getElementById("rpsResult").innerText="You: "+p+" | Bot: "+c+" → "+res;updateUI();saveUser(currentUser);}
// Slot
function playSlot(){let b=getBet();if(!b)return;let s=["🍒","🍋","⭐","🔔","7️⃣"];let res=document.getElementById("slotResult");res.innerText="🎰 Spinning...";res.style.animation="slotSpin 0.8s ease";setTimeout(()=>{res.style.animation="";let m=forceResult(),r;if(m==="win"){r=["7️⃣","7️⃣","7️⃣"];}else if(m==="lose"){r=["🍒","⭐","🔔"];}else{r=[s[Math.random()*s.length|0],s[Math.random()*s.length|0],s[Math.random()*s.length|0]];}if(r[0]===r[1]&&r[1]===r[2]){currentUser.balance+=b*5;res.innerText=r.join(" ")+" → 🎉 Jackpot +"+(b*5);}else if(r[0]===r[1]||r[1]===r[2]||r[0]===r[2]){currentUser.balance+=b;res.innerText=r.join(" ")+" → ✨ Small Win +"+b;}else{currentUser.balance-=b;res.innerText=r.join(" ")+" → ❌ Lose -"+b;}updateUI();saveUser(currentUser);},1000);}
// Mines
function startMines(){let g=document.getElementById("minesGrid");g.innerHTML="";let b=getBet();if(!b)return;for(let i=0;i<25;i++){let btn=document.createElement("button");btn.innerText="❓";btn.style.width="40px";btn.style.height="40px";btn.onclick=()=>{btn.style.animation="rollDice 0.3s";setTimeout(()=>{let m=forceResult(),mine;if(m==="win")mine=false;else if(m==="lose")mine=true;else mine=Math.random()<0.2;if(mine){btn.innerText="💣";currentUser.balance-=b;document.getElementById("minesResult").innerText="❌ Boom -"+b;}else{btn.innerText="💎";currentUser.balance+=b;document.getElementById("minesResult").innerText="🎉 Safe +"+b;}updateUI();saveUser(currentUser);},300);};g.appendChild(btn);}}
// Crash
let crashInt,crashMult=1,crashActive=false;
function startCrash(){let b=getBet();if(!b)return;crashMult=1;crashActive=true;clearInterval(crashInt);crashInt=setInterval(()=>{crashMult+=Math.random()*0.2;document.getElementById("crashResult").innerText="x"+crashMult.toFixed(2);if(forceResult()==="lose"||Math.random()<0.05){clearInterval(crashInt);document.getElementById("crashResult").innerText="💥 Crash!";currentUser.balance-=b;updateUI();saveUser(currentUser);crashActive=false;}},500);}
function cashoutCrash(){if(crashActive){clearInterval(crashInt);let b=getBet();currentUser.balance+=b*crashMult;document.getElementById("crashResult").innerText="💵 Cashed x"+crashMult.toFixed(2);updateUI();saveUser(currentUser);crashActive=false;}}
// Wheel
function spinWheel(){let b=getBet();if(!b)return;let res=document.getElementById("wheelResult");res.innerText="🎡 Spinning...";res.style.animation="wheelSpin 1s ease";setTimeout(()=>{res.style.animation="";let m=forceResult(),win;if(m==="win"){win=true;}else if(m==="lose"){win=false;}else{win=Math.random()<0.7;}if(win){currentUser.balance+=b;res.innerText="🎉 Win +"+b;}else{currentUser.balance-=b;res.innerText="❌ Lose -"+b;}updateUI();saveUser(currentUser);},1000);}
// Plinko
function playPlinko(){let b=getBet();if(!b)return;let res=document.getElementById("plinkoResult");res.innerText="🔽 Dropping...";res.style.animation="plinkoDrop 0.6s ease";setTimeout(()=>{res.style.animation="";let m=forceResult(),win;if(m==="win"){win=true;}else if(m==="lose"){win=false;}else{win=Math.random()<0.5;}if(win){currentUser.balance+=b*2;res.innerText="🟢 Win +"+(b*2);}else{currentUser.balance-=b;res.innerText="❌ Lose -"+b;}updateUI();saveUser(currentUser);},600);}
// Tower
let towerLevel=0,towerActive=false,towerBet=0;
function startTower(){towerLevel=0;towerActive=true;towerBet=getBet();document.getElementById("towerResult").innerText="Game Start";}
function nextTower(){if(!towerActive)return;let res=document.getElementById("towerResult");res.style.animation="towerRise 0.5s ease";let m=forceResult(),safe;if(m==="win"){safe=true;}else if(m==="lose"){safe=false;}else{safe=Math.random()<0.7;}setTimeout(()=>{res.style.animation="";if(safe){towerLevel++;res.innerText="Level "+towerLevel+" ✅";}else{res.innerText="❌ Collapse";currentUser.balance-=towerBet;towerActive=false;}updateUI();saveUser(currentUser);},500);}
function cashoutTower(){if(towerActive){currentUser.balance+=towerBet*(towerLevel+1);document.getElementById("towerResult").innerText="💵 Cashed at Level "+towerLevel;updateUI();saveUser(currentUser);towerActive=false;}}
</script>
</body>
</html>
