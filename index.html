<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>InstaPlay 🎮</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:"Tajawal",sans-serif;
      background:linear-gradient(-45deg,#f9ce34,#ee2a7b,#6228d7,#f9ce34);
      background-size:400% 400%;animation:gradientMove 12s ease infinite;
      color:white;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;flex-direction:column;}
    @keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .card{background:rgba(0,0,0,0.65);padding:20px;border-radius:18px;width:100%;max-width:440px;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);margin:10px auto;animation:fadeIn .6s ease;}
    h1,h2,h3{margin:0 0 15px;text-align:center;text-shadow:0 0 6px #000;}
    input,button,select{width:100%;margin:6px 0;padding:12px;border:none;border-radius:10px;font-size:15px;}
    input,select{background:#fff;color:#333}
    button{cursor:pointer;font-weight:bold;background:white;color:#6228d7;transition:.3s}
    button:hover{background:#ee2a7b;color:white;transform:scale(1.05)}
    .hidden{display:none}
    .games-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    .game-btn{background:#fff;color:#6228d7;padding:14px;border-radius:10px;font-weight:bold;cursor:pointer;transition:.3s;text-align:center}
    .game-btn:hover{background:#f9ce34;color:#000;transform:scale(1.05)}
    table{width:100%;border-collapse:collapse;background:rgba(255,255,255,0.1);margin-top:10px;}
    th,td{padding:6px;border:1px solid rgba(255,255,255,0.2);font-size:13px;text-align:center}
    th{background:rgba(0,0,0,0.4)}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    @keyframes shake{0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);}}
    @keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0);}40%{transform:translateY(-15px);}60%{transform:translateY(-8px);}}
    .lose-anim{animation:shake 0.5s;}
    .win-anim{animation:bounce 1s;}
    
    /* 📱 تحسين للموبايل */
    @media (max-width:600px){
      body{padding:10px;}
      .card{width:100%;padding:14px;margin:8px 0;border-radius:14px;}
      input,button,select{font-size:15px;padding:12px;width:100%;}
      h1,h2,h3{font-size:18px;line-height:1.4;}
      .games-grid{grid-template-columns:1fr;gap:12px;}
      .game-btn{font-size:16px;padding:16px;}
    }
  </style>
</head>
<body>

<!-- 🔊 Sounds -->
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2023/03/15/audio_4d7fa0c7b6.mp3?filename=retro-game-music-142152.mp3" loop></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/download/mixkit-achievement-bell-600.mp3"></audio>
<audio id="loseSound" src="https://assets.mixkit.co/sfx/download/mixkit-player-losing-or-failing-2042.mp3"></audio>
<audio id="clickSound" src="https://assets.mixkit.co/sfx/download/mixkit-fast-small-sweep-transition-166.mp3"></audio>

<button onclick="toggleMusic()" style="position:fixed;top:10px;right:10px;z-index:999;padding:8px;border-radius:8px">🔊 Music</button>

<!-- 🌈 Landing Page -->
<div id="landing" class="card">
  <h1>🎮 Welcome to <span style="color:#f9ce34">InstaPlay</span></h1>
  <p>أفضل منصة ألعاب ممتعة مع مكافآت وإيداعات وسحوبات فورية</p>
  <button onclick="show('auth')">🚀 Get Started</button>
</div>

<!-- 🔐 Auth -->
<div id="auth" class="card hidden">
  <h1>🎮 InstaPlay</h1>
  <h3>Login / Register</h3>
  <input id="name" type="text" placeholder="Full name">
  <input id="email" type="text" placeholder="Email">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="register()">Register</button>
  <button onclick="login()">Login</button>
  <button onclick="show('adminLogin')">👑 Admin Login</button>
</div>

<!-- 👑 Admin Login -->
<div id="adminLogin" class="card hidden">
  <h2>👑 Admin Login</h2>
  <input id="adminEmail" type="text" placeholder="Email">
  <input id="adminPass" type="password" placeholder="Password">
  <button onclick="adminLogin()">Login</button>
  <button onclick="backToAuth()">⬅️ Back</button>
</div>

<!-- 👑 Admin Panel -->
<div id="adminPanel" class="card hidden">
  <h2>👑 Admin Panel</h2>
  <table id="usersTable">
    <thead><tr><th>Name</th><th>ID</th><th>Balance</th><th>Losses</th></tr></thead>
    <tbody></tbody>
  </table>
  <button onclick="backToAuth()">⬅️ Logout</button>
</div>

<!-- 🎮 Dashboard -->
<div id="dashboard" class="card hidden">
  <h2>Welcome <span id="userName"></span></h2>
  <p>ID: <span id="userId"></span></p>
  <p>💰 Balance: <span id="balance"></span> $</p>
  <select id="betAmount">
    <option value="5">5$</option>
    <option value="10">10$</option>
    <option value="20">20$</option>
    <option value="50">50$</option>
  </select>
  <div class="games-grid">
    <div class="game-btn" onclick="hideAll();show('rpsGame')">✊✋✌️ RPS</div>
    <div class="game-btn" onclick="hideAll();show('slotGame')">🎰 Slot</div>
    <div class="game-btn" onclick="startMines()">💣 Mines</div>
  </div>
  <button onclick="logout()">🚪 Logout</button>
</div>

<!-- 🎮 Games -->
<div id="rpsGame" class="card hidden"><h2>✊✋✌️ RPS</h2>
  <button onclick="playRPS('✊')">✊</button>
  <button onclick="playRPS('✋')">✋</button>
  <button onclick="playRPS('✌️')">✌️</button>
  <p>انت: <span id="playerChoice"></span></p>
  <p>الكمبيوتر: <span id="computerChoice"></span></p>
  <p id="rpsResult"></p><button onclick="backToDash()">⬅️ Back</button>
</div>

<div id="slotGame" class="card hidden"><h2>🎰 Slot</h2>
  <button onclick="playSlot()">▶️ Spin</button><p id="slotResult"></p><button onclick="backToDash()">⬅️ Back</button>
</div>

<div id="minesGame" class="card hidden"><h2>💣 Mines</h2>
  <div id="minesGrid" style="display:grid;grid-template-columns:repeat(5,60px);gap:10px;justify-content:center;margin:15px 0;"></div>
  <p id="minesResult"></p>
  <button onclick="cashoutMines()">💵 Cashout</button>
  <button onclick="resetMines()">🔄 Reset</button>
  <button onclick="backToDash()">⬅️ Back</button>
</div>

<script>
const ADMIN_EMAIL = atob("c3BlY2lhbEBnbWFpbC5jb20="); 
const ADMIN_PASS  = atob("c3BlY2lhbDEyMw==");
let currentUser=null;

/* 🎶 Music toggle */
function toggleMusic(){
  let m=document.getElementById("bgMusic");
  if(m.paused){m.play().catch(()=>{});}else{m.pause();}
}

/* Helper functions */
function uid(){return "UID"+Math.floor(Math.random()*99999);}
function saveUser(u){localStorage.setItem("user_"+u.email,JSON.stringify(u));renderUsers();}
function loadUser(e){return JSON.parse(localStorage.getItem("user_"+e));}
function allUsers(){let arr=[];for(let i=0;i<localStorage.length;i++){let k=localStorage.key(i);if(k.startsWith("user_"))arr.push(JSON.parse(localStorage.getItem(k)));}return arr;}
function hideAll(){document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));}
function show(id){hideAll();document.getElementById(id).classList.remove("hidden");}
function backToDash(){hideAll();show("dashboard");}
function backToAuth(){hideAll();show("auth");}
function animateResult(el,isWin){
  el.classList.remove("win-anim","lose-anim");
  void el.offsetWidth;
  el.classList.add(isWin?"win-anim":"lose-anim");
}

/* Auth */
function register(){
  let name=document.getElementById("name").value;
  let email=document.getElementById("email").value;
  let pass=document.getElementById("pass").value;
  if(!name||!email||!pass){alert("Fill all fields");return;}
  if(loadUser(email)){alert("Account already exists");return;}
  let u={name,email,password:pass,balance:20,id:uid(),history:[],losses:0};
  saveUser(u);alert("Registered successfully (20$ bonus).");
}
function login(){
  let email=document.getElementById("email").value;
  let pass=document.getElementById("pass").value;
  let u=loadUser(email);
  if(!u||u.password!==pass){alert("Invalid credentials");return;}
  currentUser=u;updateUI();show("dashboard");
}
function logout(){currentUser=null;backToAuth();}
function adminLogin(){
  let email=document.getElementById("adminEmail").value;
  let pass=document.getElementById("adminPass").value;
  if(email===ADMIN_EMAIL && pass===ADMIN_PASS){show("adminPanel");renderUsers();}
  else alert("❌ Wrong admin login");
}
function updateUI(){
  document.getElementById("userName").innerText=currentUser.name;
  document.getElementById("userId").innerText=currentUser.id;
  document.getElementById("balance").innerText=currentUser.balance;
  saveUser(currentUser);
}

/* Admin Panel */
function renderUsers(){
  let tbody=document.querySelector("#usersTable tbody");tbody.innerHTML="";
  allUsers().forEach(u=>{
    let tr=document.createElement("tr");
    tr.innerHTML=`<td>${u.name}</td><td>${u.id}</td><td>${u.balance}</td><td>${u.losses}$</td>`;
    tbody.appendChild(tr);
  });
}

/* Games */
// RPS
function playRPS(player){
  let bet=5;
  let clickSound=document.getElementById("clickSound"); clickSound.currentTime=0; clickSound.play().catch(()=>{});
  let options=["✊","✋","✌️"];let comp=options[Math.floor(Math.random()*3)];
  document.getElementById("playerChoice").innerText=player;
  document.getElementById("computerChoice").innerText=comp;
  let resEl=document.getElementById("rpsResult");
  if(player===comp){resEl.innerText="🤝 Draw";}
  else if((player==="✊"&&comp==="✌️")||(player==="✋"&&comp==="✊")||(player==="✌️"&&comp==="✋")){
    currentUser.balance+=bet;resEl.innerText="🎉 Win +"+bet;let w=document.getElementById("winSound");w.currentTime=0;w.play().catch(()=>{});animateResult(resEl,true);
  }else{
    currentUser.balance-=bet;resEl.innerText="❌ Lose -"+bet;let l=document.getElementById("loseSound");l.currentTime=0;l.play().catch(()=>{});animateResult(resEl,false);
  }
  updateUI();
}

/* Slot */
function playSlot(){
  let bet=5;
  let clickSound=document.getElementById("clickSound"); clickSound.currentTime=0; clickSound.play().catch(()=>{});
  let s=["🍒","🍋","⭐","🔔","7️⃣"];
  let r=[s[Math.random()*s.length|0],s[Math.random()*s.length|0],s[Math.random()*s.length|0]];
  let resEl=document.getElementById("slotResult");let msg="";
  if(r[0]===r[1]&&r[1]===r[2]){currentUser.balance+=bet*5;msg="🎉 Jackpot!! +"+(bet*5);let w=document.getElementById("winSound");w.currentTime=0;w.play().catch(()=>{});animateResult(resEl,true);}
  else{currentUser.balance-=bet;msg="❌ Lose -"+bet;let l=document.getElementById("loseSound");l.currentTime=0;l.play().catch(()=>{});animateResult(resEl,false);}
  resEl.innerHTML=`<span style="font-size:24px">${r.join(" ")}</span><br><b>${msg}</b>`;
  updateUI();
}

/* Mines */
let minesData=[];let minesActive=false;let minesBet=0;
function startMines(){hideAll();show("minesGame");resetMines();}
function resetMines(){
  let g=document.getElementById("minesGrid");g.innerHTML="";
  minesData=[];minesActive=true;minesBet=5;
  for(let i=0;i<25;i++){
    let mine=Math.random()<0.2;minesData.push(mine);
    let b=document.createElement("button");
    b.innerText="❓";b.style.width="60px";b.style.height="60px";b.style.fontSize="22px";
    b.onclick=()=>clickMine(i,b);g.appendChild(b);
  }
}
function clickMine(i,btn){
  if(!minesActive)return;
  let resEl=document.getElementById("minesResult");
  if(minesData[i]){btn.innerText="💣";btn.style.background="#ff4444";currentUser.balance-=minesBet;minesActive=false;let l=document.getElementById("loseSound");l.currentTime=0;l.play().catch(()=>{});resEl.innerText="❌ Boom! -"+minesBet;animateResult(resEl,false);}
  else{btn.innerText="💎";btn.style.background="#44ff44";currentUser.balance+=minesBet;let w=document.getElementById("winSound");w.currentTime=0;w.play().catch(()=>{});resEl.innerText="🎉 Safe! +"+minesBet;animateResult(resEl,true);}
  updateUI();
}
function cashoutMines(){if(minesActive){minesActive=false;document.getElementById("minesResult").innerText+=" 💵 Cashed Out";}}

/* 🟢 إصلاح عام: تفعيل الأصوات بعد أول كليك */
document.addEventListener("click", ()=>{
  document.querySelectorAll("audio").forEach(a=>{
    a.play().then(()=>a.pause()).catch(()=>{});
  });
},{once:true});
</script>
</body>
</html>
